<!-- Loading Spinner -->
<div class="flexbox-parent">
    <div layout="row" layout-align="center center"  style="height: 100vh" ng-show="stateIsLoading">
        <md-progress-circular  md-diameter="150" md-mode="indeterminate"></md-progress-circular>
    </div>
</div>

<!-- Show if data is already resolved -->
<div ng-show="!stateIsLoading">
<div class="panel-header">Card Usage</div>
<md-card-actions layout="row" layout-align="start center">
    <md-card-icon-actions>
        <md-button class="md-icon-button" aria-label="Share">
            <md-icon ><i class="mdi mdi-information"></i></md-icon>
            <md-tooltip md-direction="right">Here you can see recent logged transactions and add new ones</md-tooltip>
        </md-button>
    </md-card-icon-actions>
    <md-button class="md-fab md-warn" aria-label="Add expense" ui-sref="^.add-usage">
        <md-icon>
            <i class="mdi mdi-plus" style="color: white"></i>
        </md-icon>
        <md-tooltip md-direction="bottom">Add transaction</md-tooltip>

    </md-button>
</md-card-actions>

<md-card-content>

    <h4 ng-show="!ctrl.singleCardUsages.length">There are no transactions registered to this card.</h4>

    <table ng-hide="!ctrl.singleCardUsages.length" class="invoice-table" style="width: 100%; margin-top: 15px;">
        <thead>
        <tr>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Custodian</th>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Date</th>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Type</th>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Liters</th>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Total</th>
            <th class="table-header" style="border-left: 1px solid #C7C7CB;">Receipt</th>

        </tr>
        </thead>

        <tbody>
        <tr ng-repeat="usage in ctrl.singleCardUsages | orderBy: '-date' | limitTo: 10">

            <td class="table-data" style="border-left: 1px solid #C7C7CB;">{{usage.record_custodian_name}}</td>
            <td class="table-data" style="border-left: 1px solid #C7C7CB;">{{usage.date | date}}</td>
            <td class="table-data" style="border-left: 1px solid #C7C7CB;">{{usage.purchase_type }}</td>
            <td class="table-data" style="border-left: 1px solid #C7C7CB;">{{usage.total_liters }}</td>
            <td class="table-data" style="border-left: 1px solid #C7C7CB;">{{usage.total_receipt | currency }}</td>
            <td class="table-data clickable" style="border-left: 1px solid #C7C7CB;">
                <a ng-click="ctrl.showReceipt(usage)">View receipt</a>
            </td>
            <td ng-hide="true" class="table-header"  style="border-left: 1px solid #C7C7CB;">
                <button ui-sref="dashboard.cards.view.edit-card-usage({id: usage.id})">
                    <i  class="material-icons">edit</i>
                    <span class="glyphicon glyphicon-print"></span>
                </button>
            </td>
        </tr>
        </tbody>
    </table>

    <md-card-actions ng-show="ctrl.getUser().user_type_name === 'admin'" layout="row" layout-align="end center">
        <md-button ng-hide="false" >View All</md-button>
    </md-card-actions>

</md-card-content>

</div>
